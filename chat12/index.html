<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>دلدار</title>
<style>
* { box-sizing:border-box; margin:0; padding:0; font-family: system-ui, -apple-system, BlinkMacSystemFont, "IRANSans", sans-serif; }
body { background:#f9efe3; min-height:100vh; display:flex; flex-direction:column; direction:rtl; font-size:16px; }

.header { padding:16px; background:linear-gradient(135deg,#ff6b81,#ff9a9e); color:#fff; display:flex; flex-direction:column; gap:4px; }
.header-top { display:flex; align-items:center; gap:12px; }
.header-avatar { width:44px; height:44px; border-radius:50%; background:rgba(255,255,255,0.3); display:flex; align-items:center; justify-content:center; font-size:22px; }
.header-title { font-size:18px; font-weight:600; }
.header-subtitle { font-size:14px; opacity:0.9; font-weight:400; display:flex; align-items:center; gap:4px; transition: opacity 0.5s ease; }
.typing-dots span { width:6px; height:6px; border-radius:50%; background:#fff; opacity:0.5; animation: blink 1s infinite ease-in-out; display:inline-block; }
.typing-dots span:nth-child(2){ animation-delay:0.15s; }
.typing-dots span:nth-child(3){ animation-delay:0.3s; }
@keyframes blink { 0%,100%{ opacity:0.4; } 50%{ opacity:1; } }

.chat-container { flex:1; overflow-y:auto; padding:16px; }
.chat-inner { display:flex; flex-direction:column; gap:12px; }

.bubble { max-width:90%; padding:16px 20px; border-radius:22px; font-size:20px; line-height:2; box-shadow:0 2px 5px rgba(0,0,0,0.12); white-space:pre-wrap; word-wrap:break-word; position:relative; opacity:0; transform: translateY(20px) scale(0.95); transition: opacity 0.5s ease, transform 0.5s ease; }
.bubble.show { opacity:1; transform:translateY(0) scale(1);}
.bubble-from { background:#dff2ff; align-self:flex-start; border-bottom-left-radius:6px; }
.bubble-gif img { max-width:150px; border-radius:16px; display:block; }

</style>
</head>
<body>

<div class="header">
  <div class="header-top">
    <div class="header-avatar">❤</div>
    <div class="header-title">دلدار</div>
  </div>
  <div class="header-subtitle" id="headerTyping">
    در حال تایپ
    <div class="typing-dots">
      <span></span><span></span><span></span>
    </div>
  </div>
</div>

<div class="chat-container" id="chat">
  <div class="chat-inner" id="chatInner"></div>
</div>

<script>
const chatInner = document.getElementById("chatInner");
const headerTyping = document.getElementById("headerTyping");

// پیام‌ها با تاخیر طبیعی
const messages = [
  { type:"text", text:"دوست داشتنتُ", delay:2000 },
  { type:"text", text:"نمی تونم اندازه بگیرم..", delay:2500 },
  { type:"text", text:"ولی،", delay:2200 },
  { type:"text", text:"هرچی بیشتر می گذره..", delay:2500 },
  { type:"text", text:"بیشتر میخوامت...", delay:2800 },
  { type:"gif", url:"Love.gif", delay:3500 } // استیکر بعد از متن
];

function scrollToBottom(){ chatInner.parentElement.scrollTo({ top: chatInner.scrollHeight, behavior:'smooth' }); }

let cumulativeDelay = 0;
messages.forEach(msg => {
  cumulativeDelay += msg.delay;
  setTimeout(()=>{
    const bubble = document.createElement("div");
    if(msg.type === "text"){
      bubble.classList.add("bubble","bubble-from");
      bubble.textContent = msg.text;
    } else if(msg.type === "gif"){
      bubble.classList.add("bubble","bubble-from","bubble-gif");
      const img = document.createElement("img");
      img.src = msg.url; // مسیر GIF خودت
      bubble.appendChild(img);
    }
    chatInner.appendChild(bubble);
    requestAnimationFrame(()=>bubble.classList.add("show"));
    scrollToBottom();

    // اگر پیام آخر بود، هدر تایپینگ را محو کن
    if(msg === messages[messages.length-1]){
      headerTyping.style.opacity = 0;
      setTimeout(()=>headerTyping.remove(),600);
    }

  }, cumulativeDelay);
});
</script>

</body>
</html>
