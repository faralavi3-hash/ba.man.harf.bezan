<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>دلدار</title>
<style>
* { box-sizing:border-box; margin:0; padding:0; font-family: system-ui, -apple-system, BlinkMacSystemFont, "IRANSans", sans-serif; }
body { background:#f9efe3; min-height:100vh; display:flex; flex-direction:column; direction:rtl; font-size:16px; }

.header { padding:16px; background:linear-gradient(135deg,#ff6b81,#ff9a9e); color:#fff; display:flex; flex-direction:column; gap:4px; }
.header-top { display:flex; align-items:center; gap:12px; }
.header-avatar { width:44px; height:44px; border-radius:50%; background:rgba(255,255,255,0.3); display:flex; align-items:center; justify-content:center; font-size:22px; }
.header-title { font-size:18px; font-weight:600; }
.header-subtitle { font-size:14px; opacity:0.9; font-weight:400; display:flex; align-items:center; gap:4px; transition: opacity 0.5s ease; }

.typing-dots-header { display:inline-flex; gap:3px; align-items:center; }
.typing-dots-header span { width:6px; height:6px; border-radius:50%; background:#fff; opacity:0.5; animation: blink 1s infinite ease-in-out; }
.typing-dots-header span:nth-child(2){ animation-delay:0.15s; }
.typing-dots-header span:nth-child(3){ animation-delay:0.3s; }
@keyframes blink { 0%,100%{ transform:translateY(0); opacity:0.4;} 50%{ transform:translateY(-2px); opacity:1; } }

.chat-container { flex:1; overflow-y:auto; padding:16px; }
.chat-inner { display:flex; flex-direction:column; gap:12px; }

.bubble { max-width:90%; padding:16px 20px; border-radius:22px; font-size:20px; line-height:2; box-shadow:0 2px 5px rgba(0,0,0,0.12); white-space:pre-wrap; word-wrap:break-word; position:relative; opacity:0; transform: translateY(20px) scale(0.95); transition: opacity 0.5s ease, transform 0.5s ease; }
.bubble.show { opacity:1; transform:translateY(0) scale(1);}
.bubble-from { background:#dff2ff; align-self:flex-start; border-bottom-left-radius:6px; }
</style>
</head>
<body>

<div class="header">
  <div class="header-top">
    <div class="header-avatar">❤</div>
    <div class="header-title">دلدار</div>
  </div>
  <div class="header-subtitle" id="headerTyping">
    is typing...
    <div class="typing-dots-header" id="headerDots">
      <span></span><span></span><span></span>
    </div>
  </div>
</div>

<div class="chat-container" id="chat">
  <div class="chat-inner" id="chatInner"></div>
</div>

<script>
const dialogues = [
  { text: "تو نمی دونی! ", delay: 800 },
  { text: "ولی، ", delay: 1400 },
  { text: "بعضی حرفات.. ", delay: 1800 },
  { text: "تا صبح بیدار نگهم میداره :) ", delay: 3800 }  // پیام آخر دیرتر
];

let index = 0;
const chatInner = document.getElementById("chatInner");
const headerTyping = document.getElementById("headerTyping");
const chat = document.getElementById("chat");

function scrollToBottom() {
  chat.scrollTo({ top: chat.scrollHeight, behavior: 'smooth' });
}

function addMessageBubble(text) {
  const bubble = document.createElement("div");
  bubble.classList.add("bubble","bubble-from");
  bubble.textContent = text;
  chatInner.appendChild(bubble);

  requestAnimationFrame(() => bubble.classList.add("show"));
  scrollToBottom();
}

function showNextDialogue() {
  if(index >= dialogues.length){
    // پایان typing بعد از آخرین پیام
    setTimeout(()=>{
      headerTyping.style.opacity = '0';
      setTimeout(()=>headerTyping.remove(), 600);
    }, 600);
    return;
  }

  const current = dialogues[index];

  setTimeout(()=>{
    addMessageBubble(current.text);
    index++;
    showNextDialogue();
  }, current.delay);
}

window.addEventListener("load", ()=>{ setTimeout(showNextDialogue, 700); });
</script>
</body>
</html>
